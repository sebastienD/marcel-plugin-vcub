{"version":3,"sources":["main.js"],"names":["MarcelPluginVcub","Marcel","Plugin","root","document","getElementById","dataBordeauxUrl","apiKey","fetch","replace","then","response","json","props","getData","data","innerText","type","stylesvar","style","color","fontFamily","init"],"mappings":"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","file":"main.4da75673.js","sourceRoot":"src","sourcesContent":["class MarcelPluginVcub extends Marcel.Plugin {\n\n  constructor() {\n    super()\n    this.root = document.getElementById('root')\n    this.dataBordeauxUrl='https://data.bordeaux-metropole.fr/geojson?key={{key}}&typename=ci_vcub_p'\n  }\n\n  getData(apiKey) {\n    return fetch(this.dataBordeauxUrl.replace('{{key}}', apiKey))\n        .then(response => response.json())\n  }\n\n  propsDidChange() {\n      const { apiKey } = this.props\n      this.getData(apiKey).then(data => {\n          this.root.innerText = data.type\n      })\n  }\n\n  render() {\n    const { apiKey, stylesvar = {} } = this.props\n\n    this.root.innerText = `Loading...`\n\n    // stylesvar is a special property containing the global media theme.\n    // You should use it to have a consistent style accross all the media.\n    if (stylesvar['primary-color']) this.root.style.color = stylesvar['primary-color']\n    if (stylesvar['font-family']) this.root.style.fontFamily = stylesvar['font-family']\n  }\n}\n\nMarcel.init(MarcelPluginVcub)\n\n// uncomment this line to try the plugin in a browser :\n// Marcel.changeProps({ apiKey: '...' })\n"]}